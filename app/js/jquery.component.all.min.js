/*
* Author : Jean
* Email  : jean.ma.1986@gmail.com
* Url    : https://github.com/m860/jquery-components
* Date   : Sun May 10 2015 11:43:41
*/
!function(t){function o(){this.event={}}window[t]||(window[t]={}),o.prototype={on:function(t,o){this.event[t]||(this.event[t]=[]),this.event[t].push(o)},trigger:function(t,o){var e=this,i=this.event[t];i&&$.each(i,function(t,i){i.bind(e)(o)})}},window[t].Base=o}("Component"),function(t){function o(o){switch(t.Base.call(this),this._arr=[],this._loadingStyle="",typeof o){case"function":this._loadingStyle=o();break;default:var e=/\.gif$/i;this._loadingStyle=e.test(o)?'<img src="'+o+'">':o}this._mask='<div class="loading-mask"></div>',this._loading='<div class="loading"></div>',this._startIndex=1e4}o.prototype=new t.Base,o.prototype={appendLoading:function(t){var o,e,i=0,n=0,s=!1,a=this._startIndex;if("boolean"==typeof t){$(document.body).css("overflow","hidden"),t=$(document.documentElement),o=t.width(),e=t.height();var d=$(window).height();d>e&&(e=d),s=!0}else{t=$(t),o=t.outerWidth(!0),e=t.outerHeight(!0);var h=t.offset();i=h.top,n=h.left}var r=$(this._mask);a+=this._arr.length,r.css({top:i,left:n,width:o,height:e,zIndex:a}),this._arr.push(r),r.appendTo(document.body);var l=$(this._loading);l.html(this._loadingStyle),a+=this._arr.length,l.css({top:i+e/2,left:n,width:o,zIndex:a}),s&&l.css({top:i+e/2+$(window).scrollTop()}),this._arr.push(l),l.appendTo(document.body)},removeLoading:function(){this._arr.length<=0||(this._arr.pop().remove(),this._arr.pop().remove(),$(document.body).css("overflow","auto"))}},t.Loading=o}(window.Component);